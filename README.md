# Конфигурационный парсер 

## 1. Общее описание

Этот проект представляет собой инструмент командной строки для преобразования файлов учебного конфигурационного языка в формат JSON. Программа анализирует синтаксис конфигурационных файлов, обрабатывает константы, массивы, строки и числа, а затем выводит результат в формате JSON.

### Особенности:
- Поддержка однострочных комментариев
- Обработка числовых значений (целые и дробные)
- Работа с массивами через конструкцию `list()`
- Объявление и использование глобальных констант
- Строковые значения в двойных квадратных скобках `[[текст]]`
- Выявление синтаксических ошибок с понятными сообщениями

## 2. Описание всех функций и настроек

### Основные модули и функции:

#### `config_parser.py` - основной модуль парсера

**Функции:**

1. **`remove_comments(text: str) -> str`**
   - Удаляет однострочные комментарии (символ `#` и всё после него)
   - Возвращает очищенный текст

2. **`parse_number(value_str: str) -> int|float`**
   - Парсит строку как число
   - Определяет тип числа (целое или дробное)

3. **`parse_string(value_str: str) -> str`**
   - Обрабатывает строки в формате `[[текст]]`
   - Удаляет обрамляющие скобки

4. **`parse_array(value_str: str) -> list`**
   - Парсит массивы вида `list(элемент1, элемент2, ...)`
   - Поддерживает вложенные структуры
   - Обрабатывает пустые массивы `list()`

5. **`parse_value(value_str: str) -> any`**
   - Основная функция определения типа значения
   - Распознает: числа, строки, массивы, булевы значения, константы

6. **`process_global_declaration(line: str) -> bool`**
   - Обрабатывает объявление глобальных констант: `global имя = значение;`
   - Сохраняет константы в глобальный словарь `CONSTANTS`

7. **`process_assignment(line: str) -> bool`**
   - Обрабатывает присваивания значений переменным
   - Формат: `имя = значение;`

8. **`parse_config(config_text: str) -> dict`**
   - Главная функция парсера
   - Выполняет два прохода: сбор констант → обработка присваиваний
   - Возвращает словарь с результатом

9. **`save_to_json(data: dict, output_file: str = None)`**
   - Сохраняет данные в JSON файл
   - Если `output_file` не указан, выводит в стандартный поток

10. **`main()`**
    - Точка входа программы
    - Обрабатывает аргументы командной строки
    - Управляет потоком выполнения

### Структура данных:

**Глобальные переменные:**
- `CONSTANTS` - словарь для хранения глобальных констант
- `RESULT` - словарь для хранения результата парсинга

### Синтаксис конфигурационного языка:
global name = [[Строка]]; # Объявление константы
variable = |name|; # Использование константы
number = 42; # Целое число
float = 3.14; # Дробное число
array = list(1, [[два]], 3); # Массив
bool_true = true; # Булево значение
bool_false = false; # Булево значение

## 3. Команды для сборки проекта и запуска тестов

### Предварительные требования:
- Python 3.7 или выше
- Установленный pip (менеджер пакетов Python)
Запуск программы:
python config_parser.py <входной_файл> [-o выходной_файл]
### Примеры
# Конвертация с выводом в stdout
python config_parser.py examples/test.conf

# Конвертация с сохранением в файл
python config_parser.py examples/cats.conf -o result.json

# Использование относительных путей
python config_parser.py ../configs/settings.conf -o ../output/settings.json

